<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programming Books Database</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .control-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .filter-btn, .action-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            border: none;
            font-size: 14px;
        }
        
        .filter-btn:hover, .filter-btn.active, .action-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .action-btn {
            background: #28a745;
            color: white;
        }
        
        .action-btn.danger {
            background: #dc3545;
        }
        
        .action-btn.warning {
            background: #ffc107;
            color: #333;
        }
        
        .search-section {
            display: flex;
            gap: 10px;
            align-items: center;
            flex: 1;
            max-width: 400px;
        }
        
        .search-input {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: #f8f9ff;
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            min-width: 120px;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 0.9em;
            color: #666;
        }
        
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }
        
        .book-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border-left: 5px solid #667eea;
            position: relative;
        }
        
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .book-actions {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 8px;
        }
        
        .book-action-btn {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .edit-btn {
            background: #ffc107;
            color: #333;
        }
        
        .delete-btn {
            background: #dc3545;
            color: white;
        }
        
        .book-action-btn:hover {
            transform: scale(1.1);
        }
        
        .book-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding-right: 70px;
        }
        
        .book-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
            flex: 1;
        }
        
        .difficulty-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
            flex-shrink: 0;
        }
        
        .beginner { background: #e8f5e8; color: #2e7d32; }
        .intermediate { background: #fff3e0; color: #f57c00; }
        .advanced { background: #fce4ec; color: #c2185b; }
        
        .book-author {
            color: #666;
            font-style: italic;
            margin-bottom: 15px;
        }
        
        .book-description {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .book-highlights {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        
        .book-highlights h4 {
            color: #667eea;
            margin-bottom: 8px;
        }
        
        .book-highlights ul {
            list-style: none;
            padding-left: 0;
        }
        
        .book-highlights li {
            padding: 3px 0;
            position: relative;
            padding-left: 20px;
        }
        
        .book-highlights li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }
        
        .book-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .stars {
            color: #ffc107;
        }
        
        .category-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        
        .tag {
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 500;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }
        
        .close:hover {
            color: #333;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .highlights-input {
            margin-bottom: 10px;
        }
        
        .highlights-container {
            max-height: 150px;
            overflow-y: auto;
        }
        
        .highlight-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .highlight-item input {
            flex: 1;
            margin: 0;
        }
        
        .highlight-remove {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 8px;
            border-radius: 3px;
            cursor: pointer;
        }
        
        .add-highlight-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .category-checkboxes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .empty-state h3 {
            margin-bottom: 10px;
            color: #333;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .control-row {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-section {
                max-width: none;
            }
            
            .stats {
                flex-direction: column;
                gap: 10px;
            }
            
            .books-grid {
                grid-template-columns: 1fr;
            }
            
            .book-header {
                flex-direction: column;
                padding-right: 70px;
            }
            
            .difficulty-badge {
                margin-left: 0;
                margin-top: 10px;
                align-self: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö Programming Books Database</h1>
            <p>Manage and discover essential programming books</p>
        </div>
        
        <div class="control-panel">
            <div class="control-row">
                <div class="search-section">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search books, authors, or keywords...">
                    <button class="action-btn" onclick="clearSearch()">Clear</button>
                </div>
                <div class="action-buttons">
                    <button class="action-btn" onclick="openAddModal()">+ Add Book</button>
                    <button class="action-btn warning" onclick="exportData()">Export Data</button>
                    <button class="action-btn danger" onclick="clearDatabase()">Clear All</button>
                </div>
            </div>
            
            <div class="stats" id="stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalBooks">0</div>
                    <div class="stat-label">Total Books</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgRating">0.0</div>
                    <div class="stat-label">Avg Rating</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="categories">0</div>
                    <div class="stat-label">Categories</div>
                </div>
            </div>
            
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All Books</button>
                <button class="filter-btn" data-filter="fundamentals">Code Quality</button>
                <button class="filter-btn" data-filter="architecture">System Design</button>
                <button class="filter-btn" data-filter="algorithms">Algorithms</button>
                <button class="filter-btn" data-filter="career">Career Growth</button>
                <button class="filter-btn" data-filter="patterns">Design Patterns</button>
            </div>
        </div>
        
        <div class="books-grid" id="booksGrid">
            <!-- Books will be populated by JavaScript -->
        </div>
    </div>

    <!-- Add/Edit Book Modal -->
    <div id="bookModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Add New Book</h2>
            <form id="bookForm">
                <div class="form-group">
                    <label for="bookTitle">Title *</label>
                    <input type="text" id="bookTitle" required>
                </div>
                
                <div class="form-group">
                    <label for="bookAuthor">Author *</label>
                    <input type="text" id="bookAuthor" required>
                </div>
                
                <div class="form-group">
                    <label for="bookDifficulty">Difficulty *</label>
                    <select id="bookDifficulty" required>
                        <option value="beginner">Beginner</option>
                        <option value="intermediate">Intermediate</option>
                        <option value="advanced">Advanced</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="bookRating">Rating (1-5) *</label>
                    <input type="number" id="bookRating" min="1" max="5" step="0.1" required>
                </div>
                
                <div class="form-group">
                    <label for="bookDescription">Description *</label>
                    <textarea id="bookDescription" required></textarea>
                </div>
                
                <div class="form-group">
                    <label>Key Highlights</label>
                    <div class="highlights-container" id="highlightsContainer"></div>
                    <button type="button" class="add-highlight-btn" onclick="addHighlight()">+ Add Highlight</button>
                </div>
                
                <div class="form-group">
                    <label>Categories</label>
                    <div class="category-checkboxes">
                        <div class="checkbox-group">
                            <input type="checkbox" id="cat-fundamentals" value="fundamentals">
                            <label for="cat-fundamentals">Fundamentals</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="cat-architecture" value="architecture">
                            <label for="cat-architecture">Architecture</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="cat-algorithms" value="algorithms">
                            <label for="cat-algorithms">Algorithms</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="cat-career" value="career">
                            <label for="cat-career">Career</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="cat-patterns" value="patterns">
                            <label for="cat-patterns">Patterns</label>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button type="submit" class="action-btn">Save Book</button>
                    <button type="button" class="action-btn danger" onclick="closeModal()" style="margin-left: 10px;">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // In-memory database simulation (replace with real database in production)
        class BookDatabase {
            constructor() {
                this.books = this.loadFromStorage();
                this.nextId = this.getNextId();
                if (this.books.length === 0) {
                    this.seedInitialData();
                }
            }
            
            loadFromStorage() {
                const stored = localStorage.getItem('programmingBooksDB');
                return stored ? JSON.parse(stored) : [];
            }
            
            saveToStorage() {
                localStorage.setItem('programmingBooksDB', JSON.stringify(this.books));
            }
            
            getNextId() {
                const maxId = this.books.reduce((max, book) => Math.max(max, book.id || 0), 0);
                return maxId + 1;
            }
            
            seedInitialData() {
                const initialBooks = [
                    {
                        id: 1,
                        title: "Clean Code: A Handbook of Agile Software Craftsmanship",
                        author: "Robert C. Martin (Uncle Bob)",
                        difficulty: "intermediate",
                        rating: 4.8,
                        categories: ["fundamentals", "career"],
                        description: "The gold standard for writing maintainable, readable code. This book teaches you the principles and practices of clean coding that separate professionals from amateurs.",
                        highlights: [
                            "Learn to write code that expresses intent clearly",
                            "Master the art of meaningful naming and functions",
                            "Understand how to structure classes and systems",
                            "Develop habits that prevent technical debt"
                        ]
                    },
                    {
                        id: 2,
                        title: "The Pragmatic Programmer: From Journeyman to Master",
                        author: "Andrew Hunt & David Thomas",
                        difficulty: "intermediate",
                        rating: 4.7,
                        categories: ["career", "fundamentals"],
                        description: "A classic guide that teaches practical approaches to software development. Updated 20th anniversary edition covers modern development practices.",
                        highlights: [
                            "70+ practical tips for better programming",
                            "Learn to think like a pragmatic programmer",
                            "Master debugging and testing techniques",
                            "Understand software entropy and how to fight it"
                        ]
                    },
                    {
                        id: 3,
                        title: "Designing Data-Intensive Applications",
                        author: "Martin Kleppmann",
                        difficulty: "advanced",
                        rating: 4.9,
                        categories: ["architecture", "patterns"],
                        description: "The definitive guide to building scalable, reliable systems. Essential for understanding distributed systems and data architecture.",
                        highlights: [
                            "Deep dive into database internals",
                            "Learn distributed systems principles",
                            "Master data modeling and storage",
                            "Understand consistency, availability, and partition tolerance"
                        ]
                    },
                    {
                        id: 4,
                        title: "Code Complete: A Practical Handbook of Software Construction",
                        author: "Steve McConnell",
                        difficulty: "intermediate",
                        rating: 4.6,
                        categories: ["fundamentals", "patterns"],
                        description: "Comprehensive guide to software construction covering everything from design to debugging. Often called the 'manual of software engineering.'",
                        highlights: [
                            "Complete software development lifecycle",
                            "Best practices for code construction",
                            "Detailed debugging and testing strategies",
                            "Performance optimization techniques"
                        ]
                    },
                    {
                        id: 5,
                        title: "Introduction to Algorithms (CLRS)",
                        author: "Cormen, Leiserson, Rivest & Stein",
                        difficulty: "advanced",
                        rating: 4.5,
                        categories: ["algorithms"],
                        description: "The comprehensive reference for algorithms and data structures. Used in computer science courses worldwide.",
                        highlights: [
                            "Complete coverage of fundamental algorithms",
                            "Mathematical analysis and proofs",
                            "Advanced data structures",
                            "Graph algorithms and dynamic programming"
                        ]
                    },
                    {
                        id: 6,
                        title: "System Design Interview",
                        author: "Alex Xu",
                        difficulty: "intermediate",
                        rating: 4.4,
                        categories: ["architecture", "career"],
                        description: "Practical guide to system design interviews and building scalable systems. Perfect for preparing for tech interviews.",
                        highlights: [
                            "Step-by-step system design process",
                            "Real-world case studies",
                            "Scalability patterns and trade-offs",
                            "Interview preparation strategies"
                        ]
                    },
                    {
                        id: 7,
                        title: "Refactoring: Improving the Design of Existing Code",
                        author: "Martin Fowler",
                        difficulty: "intermediate",
                        rating: 4.7,
                        categories: ["fundamentals", "patterns"],
                        description: "Learn how to improve code structure without changing functionality. Essential for maintaining and evolving codebases.",
                        highlights: [
                            "Catalog of refactoring techniques",
                            "When and how to refactor safely",
                            "Code smell identification",
                            "Automated refactoring tools and techniques"
                        ]
                    },
                    {
                        id: 8,
                        title: "Effective Java",
                        author: "Joshua Bloch",
                        difficulty: "advanced",
                        rating: 4.8,
                        categories: ["patterns", "fundamentals"],
                        description: "Best practices for Java programming from the architect of Java Collections Framework. Principles apply to other languages too.",
                        highlights: [
                            "90 best practices for Java development",
                            "Object-oriented design principles",
                            "Performance optimization tips",
                            "Common pitfalls and how to avoid them"
                        ]
                    },
                    {
                        id: 9,
                        title: "The Software Engineer's Guidebook",
                        author: "Gergely Orosz",
                        difficulty: "beginner",
                        rating: 4.6,
                        categories: ["career", "fundamentals"],
                        description: "Comprehensive guide to thriving as a software engineer, covering technical skills, career growth, and industry insights.",
                        highlights: [
                            "Career progression strategies",
                            "Technical leadership skills",
                            "Industry insights and trends",
                            "Work-life balance for developers"
                        ]
                    },
                    {
                        id: 10,
                        title: "Cracking the Coding Interview",
                        author: "Gayle Laakmann McDowell",
                        difficulty: "intermediate",
                        rating: 4.3,
                        categories: ["algorithms", "career"],
                        description: "The ultimate guide for technical interviews at top tech companies. Includes 189 programming problems and solutions.",
                        highlights: [
                            "189 programming interview questions",
                            "Step-by-step solution walkthroughs",
                            "Big O analysis and optimization",
                            "System design interview prep"
                        ]
                    }
                ];
                
                this.books = initialBooks;
                this.nextId = 11;
                this.saveToStorage();
            }
            
            getAll() {
                return [...this.books];
            }
            
            getById(id) {
                return this.books.find(book => book.id === id);
            }
            
            add(book) {
                const newBook = { ...book, id: this.nextId++ };
                this.books.push(newBook);
                this.saveToStorage();
                return newBook;
            }
            
            update(id, updates) {
                const index = this.books.findIndex(book => book.id === id);
                if (index !== -1) {
                    this.books[index] = { ...this.books[index], ...updates };
                    this.saveToStorage();
                    return this.books[index];
                }
                return null;
            }
            
            delete(id) {
                const index = this.books.findIndex(book => book.id === id);
                if (index !== -1) {
                    const deleted = this.books.splice(index, 1)[0];
                    this.saveToStorage();
                    return deleted;
                }
                return null;
            }
            
            search(query) {
                const lowercaseQuery = query.toLowerCase();
                return this.books.filter(book => 
                    book.title.toLowerCase().includes(lowercaseQuery) ||
                    book.author.toLowerCase().includes(lowercaseQuery) ||
                    book.description.toLowerCase().includes(lowercaseQuery) ||
                    book.highlights.some(highlight => highlight.toLowerCase().includes(lowercaseQuery))
                );
            }
            
            clear() {
                this.books = [];
                this.nextId = 1;
                this.saveToStorage();
            }
            
            export() {
                return JSON.stringify(this.books, null, 2);
            }
        }

        // Initialize database
        const db = new BookDatabase();
        let currentFilter = 'all';
        let currentEditingId = null;

        // UI Functions
        function renderBooks(booksToShow = null) {
            const books = booksToShow || db.getAll();
            const grid = document.getElementById('booksGrid');
            
            if (books.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <h3>No books found</h3>
                        <p>Add some books to get started or adjust your search criteria.</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = '';
            books.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card';
                bookCard.innerHTML = `
                    <div class="book-actions">
                        <button class="book-action-btn edit-btn" onclick="editBook(${book.id})" title="Edit">‚úèÔ∏è</button>
                        <button class="book-action-btn delete-btn" onclick="deleteBook(${book.id})" title="Delete">üóëÔ∏è</button>
                    </div>
                    <div class="book-header">
                        <div class="book-title">${book.title}</div>
                        <div class="difficulty-badge ${book.difficulty}">${book.difficulty.charAt(0).toUpperCase() + book.difficulty.slice(1)}</div>
                    </div>
                    <div class="book-author">by ${book.author}</div>
                    <div class="book-rating">
                        <span class="stars">${'‚òÖ'.repeat(Math.floor(book.rating))}${'‚òÜ'.repeat(5-Math.floor(book.rating))}</span>
                        <span>${book.rating}/5</span>
                    </div>
                    <div class="book-description">${book.description}</div>
                    <div class="book-highlights">
                        <h4>Key Benefits:</h4>
                        <ul>
                            ${book.highlights.map(highlight => `<li>${highlight}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="category-tags">
                        ${book.categories.map(cat => `<span class="tag">${cat.charAt(0).toUpperCase() + cat.slice(1)}</span>`).join('')}
                    </div>
                `;
                grid.appendChild(bookCard);
            });
            
            updateStats();
        }

        function updateStats() {
            const books = db.getAll();
            const totalBooks = books.length;
            const avgRating = totalBooks > 0 ? (books.reduce((sum, book) => sum + book.rating, 0) / totalBooks).toFixed(1) : '0.0';
            const uniqueCategories = new Set(books.flatMap(book => book.categories)).size;
            
            document.getElementById('totalBooks').textContent = totalBooks;
            document.getElementById('avgRating').textContent = avgRating;
            document.getElementById('categories').textContent = uniqueCategories;
        }

        function filterBooks(category) {
            currentFilter = category;
            let filteredBooks;
            
            if (category === 'all') {
                filteredBooks = db.getAll();
            } else {
                filteredBooks = db.getAll().filter(book => book.categories.includes(category));
            }
            
            // Apply search if there's a query
            const searchQuery = document.getElementById('searchInput').value;
            if (searchQuery) {
                filteredBooks = filteredBooks.filter(book => 
                    book.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    book.author.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    book.description.toLowerCase().includes(searchQuery.toLowerCase())
                );
            }
            
            renderBooks(filteredBooks);
        }

        function searchBooks() {
            const query = document.getElementById('searchInput').value;
            let books = db.search(query);
            
            // Apply current filter
            if (currentFilter !== 'all') {
                books = books.filter(book => book.categories.includes(currentFilter));
            }
            
            renderBooks(books);
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            filterBooks(currentFilter);
        }

        // Modal Functions
        function openAddModal() {
            currentEditingId = null;
            document.getElementById('modalTitle').textContent = 'Add New Book';
            document.getElementById('bookForm').reset();
            clearHighlights();
            addHighlight(); // Add one empty highlight field
            document.getElementById('bookModal').style.display = 'block';
        }

        function editBook(id) {
            currentEditingId = id;
            const book = db.getById(id);
            if (!book) return;
            
            document.getElementById('modalTitle').textContent = 'Edit Book';
            document.getElementById('bookTitle').value = book.title;
            document.getElementById('bookAuthor').value = book.author;
            document.getElementById('bookDifficulty').value = book.difficulty;
            document.getElementById('bookRating').value = book.rating;
            document.getElementById('bookDescription').value = book.description;
            
            // Set categories
            const categoryCheckboxes = document.querySelectorAll('.checkbox-group input[type="checkbox"]');
            categoryCheckboxes.forEach(checkbox => {
                checkbox.checked = book.categories.includes(checkbox.value);
            });
            
            // Set highlights
            clearHighlights();
            book.highlights.forEach(highlight => {
                addHighlight(highlight);
            });
            
            document.getElementById('bookModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('bookModal').style.display = 'none';
        }

        function deleteBook(id) {
            if (confirm('Are you sure you want to delete this book?')) {
                db.delete(id);
                filterBooks(currentFilter);
            }
        }

        // Highlights management
        function addHighlight(value = '') {
            const container = document.getElementById('highlightsContainer');
            const highlightDiv = document.createElement('div');
            highlightDiv.className = 'highlight-item';
            highlightDiv.innerHTML = `
                <input type="text" placeholder="Enter highlight..." value="${value}">
                <button type="button" class="highlight-remove" onclick="removeHighlight(this)">√ó</button>
            `;
            container.appendChild(highlightDiv);
        }

        function removeHighlight(button) {
            button.parentElement.remove();
        }

        function clearHighlights() {
            document.getElementById('highlightsContainer').innerHTML = '';
        }

        function getHighlights() {
            const inputs = document.querySelectorAll('#highlightsContainer input');
            return Array.from(inputs)
                .map(input => input.value.trim())
                .filter(value => value.length > 0);
        }

        // Form submission
        function handleFormSubmit(event) {
            event.preventDefault();
            
            const title = document.getElementById('bookTitle').value;
            const author = document.getElementById('bookAuthor').value;
            const difficulty = document.getElementById('bookDifficulty').value;
            const rating = parseFloat(document.getElementById('bookRating').value);
            const description = document.getElementById('bookDescription').value;
            const highlights = getHighlights();
            
            const categories = [];
            const categoryCheckboxes = document.querySelectorAll('.checkbox-group input[type="checkbox"]:checked');
            categoryCheckboxes.forEach(checkbox => {
                categories.push(checkbox.value);
            });
            
            if (categories.length === 0) {
                alert('Please select at least one category.');
                return;
            }
            
            const bookData = {
                title,
                author,
                difficulty,
                rating,
                description,
                highlights,
                categories
            };
            
            if (currentEditingId) {
                db.update(currentEditingId, bookData);
            } else {
                db.add(bookData);
            }
            
            closeModal();
            filterBooks(currentFilter);
        }

        // Additional utility functions
        function clearDatabase() {
            if (confirm('Are you sure you want to clear all books? This cannot be undone.')) {
                db.clear();
                filterBooks(currentFilter);
            }
        }

        function exportData() {
            const data = db.export();
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'programming-books.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            renderBooks();

            // Filter buttons
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    const category = this.getAttribute('data-filter');
                    filterBooks(category);
                });
            });

            // Search functionality
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', searchBooks);

            // Modal functionality
            const modal = document.getElementById('bookModal');
            const closeBtn = document.querySelector('.close');
            
            closeBtn.addEventListener('click', closeModal);
            
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    closeModal();
                }
            });

            // Form submission
            document.getElementById('bookForm').addEventListener('submit', handleFormSubmit);
        });
    </script>
</body>
</html>